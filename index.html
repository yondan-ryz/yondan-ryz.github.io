<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prediksi Gambar dengan TensorFlow.js</title>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"></script>
</head>
<body>

<h1>Prediksi Gambar dengan TensorFlow.js</h1>

<!-- Input untuk memilih gambar -->
<input type="file" id="imageInput" accept="image/*">
<br><br>

<!-- Tempat untuk menampilkan gambar yang dipilih -->
<img id="image" width="200" height="200" style="display:none;">
<br><br>

<!-- Tempat untuk menampilkan hasil prediksi -->
<div id="predictionResult"></div>

<script>
  async function loadModel() {
    try {
      // Memuat model TensorFlow.js
      const model = await tf.loadLayersModel('path/to/your/model.json');
      console.log('Model berhasil dimuat');

      // Menunggu gambar dari pengguna
      document.getElementById('imageInput').addEventListener('change', handleImageUpload);

      // Fungsi untuk memproses gambar dan melakukan prediksi
      async function handleImageUpload(event) {
        const file = event.target.files[0];
        if (file) {
          const imgElement = document.getElementById('image');
          imgElement.src = URL.createObjectURL(file);
          imgElement.style.display = 'block';

          // Menunggu gambar dimuat
          imgElement.onload = async () => {
            // Mengubah gambar menjadi tensor dan meresize
            const imageTensor = tf.browser.fromPixels(imgElement)
              .resizeNearestNeighbor([200, 200]) // Resize sesuai input model (200x200)
              .toFloat()
              .expandDims(3); // Tambahkan dimensi batch (1, 200, 200, 3)

            // Melakukan prediksi
            const prediction = model.predict(imageTensor);

            // Menampilkan hasil prediksi
            prediction.array().then(predictionArray => {
              const resultElement = document.getElementById('predictionResult');
              resultElement.innerHTML = `Prediksi: ${predictionArray[0]}`;
            });
          };
        }
      }

    } catch (error) {
      console.error('Terjadi kesalahan saat memuat model:', error);
    }
  }

  // Memuat model saat halaman dimuat
  loadModel();
</script>

</body>
</html>
